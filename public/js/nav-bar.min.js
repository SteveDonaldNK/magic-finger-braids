function updateQuantity(e,t,n,a){let o=JSON.parse(localStorage.getItem("cartItems")),i=o.find(n=>n.id===e&&n.option===t);if(a?i.quantity=a>99?99:Number(a):i&&i.quantity<=99&&("increase"===n?i.quantity+=1:"reduce"===n&&(i.quantity-=1)),i.quantity<=0&&(o=o.filter(n=>!(n.id===e&&n.option===t))),0===o.length){const e=document.querySelectorAll(".cart"),t=document.querySelector(".offcanvasRight-body"),n=document.querySelector(".offcanvas-body-total");e.forEach(e=>e.innerHTML=""),t.classList.remove("hide"),n.classList.add("hide")}localStorage.setItem("cartItems",JSON.stringify(o)),getCart(),"/checkout"===window.location.pathname&&listItems()}function isFavorite(e){let t=JSON.parse(localStorage.getItem("favorites"))||[],n=t.find(t=>t===e);if(n){const e=document.querySelector(".favorite");e.innerHTML="Remove from wishlist"}}function addfav(e,t){const n=document.querySelectorAll(".fav");let a=JSON.parse(localStorage.getItem("favorites"))||[];const o=a.findIndex(t=>t===e);o<0?(a.push(e),t.target.innerHTML="Remove from wishlist"):(a.splice(o,1),t.target.innerHTML="Add to wishlist"),n.forEach(e=>{e.classList.remove("d-none"),0===a.length?e.innerHTML="":e.innerHTML=a.length}),localStorage.setItem("favorites",JSON.stringify(a))}function removeFromCart(e,t){const n=JSON.parse(localStorage.getItem("cartItems"))||[],a=document.querySelectorAll(".cart"),o=n.findIndex(n=>n.id===e&&n.option===t);if(-1!==o&&(n.splice(o,1),a.forEach(e=>e.innerHTML=n.length),localStorage.setItem("cartItems",JSON.stringify(n)),getCart(),"/checkout"===window.location.pathname&&listItems(),0===n.length)){const e=document.querySelectorAll(".cart"),t=document.querySelector(".offcanvasRight-body"),n=document.querySelector(".offcanvas-body-total");t.classList.remove("hide"),n.classList.add("hide"),e.forEach(e=>e.innerHTML="")}}function getCart(){const e=JSON.parse(localStorage.getItem("cartItems"))||[],t=document.querySelector(".offcanvas-body-total"),n=document.querySelector("#amount"),a=document.querySelector(".item-list");if(0!==e.length){const e=document.querySelector(".offcanvasRight-body");e.classList.add("hide"),t.classList.remove("hide")}a.innerHTML="",n.innerHTML="",e.forEach(e=>{const t=`\n        <div class="d-flex item-container mb-4 position-relative">\n            <button onclick="removeFromCart('${e.id}', '${e.option}')" style="height: 0.3rem; width: 0.3rem" type="button" class="btn-close position-absolute top-0 end-0" aria-label="Close"></button>\n            <div class="image-container">\n                <img loading="lazy" class="item-img" src="/${e.image}" alt="${e.name}">\n            </div>\n            <div class="content-container ms-4 w-100 d-flex">\n                <p class="mb-0">${e.name} (${e.option})</p>\n                <div class="d-flex w-100 justify-content-between unit-data">\n                <div class="d-flex align-items-end">\n                    <button onclick="updateQuantity('${e.id}','${e.option}','reduce', null)" class="btn me-2">-</button>\n                    <input min="0" max="99" type="number" onchange="updateQuantity('${e.id}','${e.option}', null, event.target.value)" value="${e.quantity}">\n                    <button onclick="updateQuantity('${e.id}','${e.option}','increase', null)" class="btn ms-2">+</button>\n                </div>\n                <div class="d-flex align-items-end">\n                    <p class="mb-0 price">$${e.quantity*e.price}</p>\n                </div>\n                </div>\n            </div>\n        </div>\n        <hr class="w-100 my-4 mx-0">\n        `;a.innerHTML+=t,n.innerHTML=Number(n.innerHTML)+e.price*e.quantity})}function emptyUserCart(){const e=document.querySelector(".offcanvasRight-body"),t=document.querySelector(".item-list"),n=document.querySelector(".offcanvas-body-total");localStorage.removeItem("cartItems"),t.innerHTML="",n.classList.add("hide"),e.classList.remove("hide")}const cartBadge=document.querySelectorAll(".cart"),favBadge=document.querySelectorAll(".fav"),cartItems=JSON.parse(localStorage.getItem("cartItems"))||[],fav=JSON.parse(localStorage.getItem("favorites"))||[];0===cartItems.length?cartBadge.forEach(e=>e.classList.add("d-none")):cartBadge.forEach(e=>{e.classList.remove("d-none"),e.innerHTML=cartItems.length}),0===fav.length?favBadge.forEach(e=>e.classList.add("d-none")):favBadge.forEach(e=>{e.classList.remove("d-none"),e.innerHTML=fav.length});