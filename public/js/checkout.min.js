function processCheckout(t){const e=document.querySelector("#validationCustom07"),n=document.querySelector(".no-item"),o=formatDate(e.value),i=JSON.parse(localStorage.getItem("cartItems")),a=[],s='<div class="spinner-border spinner-border-sm text-light" role="status">\n      <span class="visually-hidden">Loading...</span>\n    </div>';form.checkValidity()&&(null===i?(n.classList.replace("d-none","d-block"),setTimeout(()=>{n.classList.replace("d-block","d-none")},5e3)):(t.target.classList.add("disabled"),t.target.innerHTML=s,i.forEach(t=>{const e={id:t.id,option:t.option,quantity:t.quantity};a.push(e)}),fetch("/create-checkout-session",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({items:a,bookingDate:o})}).then(t=>t.ok?t.json():t.json().then(t=>Promise.reject(t))).then(({url:e})=>{t.target.innerHTML="Proceed to checkout",window.location=e}).catch(t=>{console.log(t)})))}function listItems(){const t=JSON.parse(localStorage.getItem("cartItems"))||[],e=document.querySelector(".checkout-total"),n=document.querySelector(".checkout-real-total"),o=document.querySelector(".checkout-items-container");o.innerHTML="",e.innerHTML="",t.forEach(t=>{const i=`\n        <div class="d-flex item-container mb-4 position-relative">\n            <button onclick="removeFromCart('${t.id}', '${t.option}')" style="height: 0.3rem; width: 0.3rem" type="button" class="btn-close position-absolute top-0 end-0" aria-label="Close"></button>\n            <div class="image-container">\n                <img loading="lazy" class="item-img" src="/${t.image}" alt="${t.name}">\n            </div>\n            <div class="content-container ms-4 w-100 d-flex">\n                <p class="mb-0">${t.name} (${t.option})</p>\n                <div class="d-flex w-100 justify-content-between unit-data">\n                <div class="d-flex w-100 align-items-center justify-content-between">\n                    <p class="mb-0">Quantity: ${t.quantity}</p>\n                    <p class="mb-0 price">$${t.quantity*t.price}</p>\n                </div>\n                </div>\n            </div>\n        </div>\n        <hr class="w-100 my-4 mx-0">\n        `;o.innerHTML+=i,e.innerHTML=Number(e.innerHTML)+t.price*t.quantity,n.innerHTML=Number(e.innerHTML)-50})}function formatDate(t){const e=new Date(t),n={year:"numeric",month:"2-digit",day:"2-digit"};return e.toLocaleDateString("en-US",n)}function insertCountries(){const t=document.getElementById("validationCustom06");fetch("https://restcountries.com/v2/all").then(t=>t.json()).then(e=>{e.forEach(e=>{const n=document.createElement("option");n.value=e.name,n.text=e.name,t.add(n)})})}const form=document.querySelector(".needs-validation"),now=new Date;now.getHours()>=18&&now.setDate(now.getDate()+1);const dd=String(now.getDate()).padStart(2,"0"),mm=String(now.getMonth()+1).padStart(2,"0"),yyyy=now.getFullYear(),today=yyyy+"-"+mm+"-"+dd;document.getElementById("validationCustom07").setAttribute("min",today);const tooltipTriggerList=document.querySelectorAll('[data-bs-toggle="tooltip"]'),tooltipList=[...tooltipTriggerList].map(t=>new bootstrap.Tooltip(t));(()=>{"use strict";form.addEventListener("submit",t=>{t.preventDefault(),form.checkValidity()||t.stopPropagation(),form.classList.add("was-validated")},!1)})(),listItems(),insertCountries();